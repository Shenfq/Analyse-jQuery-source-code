<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		.box{
			width: 100px;
			height: 100px;
			background-color: red;
			position:relative;
			top:0;
		}
	</style>
</head>
<body>
	<div class="box" id="box1"></div>

	<script type="text/javascript" src="../jquery-2.0.3.js"></script>
	<script type="text/javascript">
		/*		
		var $box = $('#box1');
		$.queue($box,null,function(a){
			alert(1);
		});
		$.queue($box,null,function(b){
			alert(2);
		});
		console.log( $.queue($box) );

		$.queue($box,null,[function(c){
			alert(3);
		},function(d){
			alert(4);
		}]);
		console.log( $.queue($box) );//如果传入的是函数数组会将之前的队列覆盖

		$.dequeue($box);
		$.dequeue($box);
		*/
		/*
		$(function(){

			var box1 = $('#box1');
			var FUNC=[
				function(next) {box1.animate({width:'200'},next);},
				function(next) {box1.animate({width:'500'},next);},
				function(next) {box1.animate({height:'300'},next);},
				function(next) {box1.animate({left:'400'},next);},
				function(next) {box1.animate({left:'200'},next);},
				function(next) {alert('动画结束')}
			];

			$.queue(document, 'myAnimation',FUNC);
			$.dequeue(document ,'myAnimation');
		});
		*/

		

		$(function() {
			var box1 = $('#box1');
			box1.click(function() {
				$(this).animate({width: 300},800)
				.queue(function(next) {
					$(this).css('background-color','blue');
					next();
				})
				.animate({left: 200},800)
				.promise().done(function() {
					alert('has done');
				});
			});
		});

		
	</script>
</body>
</html>